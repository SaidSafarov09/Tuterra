# Tuterra - Система управления уроками

## Установка и настройка

### Локальная разработка

1. Установите зависимости:
```bash
npm install
```

2. Для локальной разработки с SQLite создайте файл `.env.local`:
```bash
cp .env.example .env.local
```

Затем отредактируйте `.env.local`, установив:
```
DATABASE_URL="file:./dev.db"
```

3. Синхронизируйте базу данных:
```bash
npx prisma db push --accept-data-loss
```

4. Запустите приложение:
```bash
npm run dev
```

### Продакшен

Для продакшен-окружения:

1. Убедитесь, что в основном файле `.env` указаны правильные настройки подключения к PostgreSQL:
```
DATABASE_URL="postgresql://username:password@host:5432/database_name"
```

2. Сгенерируйте и примените миграции:
```bash
npx prisma migrate deploy
```

## Переключение между базами данных

### С SQLite (локальная разработка)
- Используйте файл `.env.local` с настройками SQLite
- Значение `DATABASE_URL="file:./dev.db"`

### С PostgreSQL (продакшен)
- Используйте файл `.env` с настройками PostgreSQL
- Значение `DATABASE_URL="postgresql://username:password@host:5432/database_name"`

## Особенности реализации

Проект поддерживает работу как с SQLite (для локальной разработки), так и с PostgreSQL (для продакшена). Ключевые особенности:

- Поле `daysOfWeek` в модели `LessonSeries` хранится как строка JSON для совместимости с SQLite, но обрабатывается как массив в приложении
- Все компоненты и API-маршруты корректно обрабатывают как строку, так и массив для этого поля
- Для локальной разработки рекомендуется использовать SQLite, т.к. это упрощает настройку окружения
- Для продакшена рекомендуется использовать PostgreSQL из-за его надежности и производительности в многопользовательском режиме
