# Инструкция по деплою SkillTrack на Vercel

## 1. Подготовка (GitHub)

1.  Убедитесь, что ваш проект загружен в репозиторий на GitHub.
    *   Если нет, создайте новый репозиторий на [github.com](https://github.com).
    *   Выполните команды в терминале проекта:
        ```bash
        git add .
        git commit -m "Prepare for deployment"
        git branch -M main
        git remote add origin <ВАШ_URL_РЕПОЗИТОРИЯ>
        git push -u origin main
        ```

## 2. Создание проекта в Vercel

1.  Зайдите на [vercel.com](https://vercel.com) и войдите (лучше через GitHub).
2.  Нажмите **"Add New..."** -> **"Project"**.
3.  Найдите ваш репозиторий `SkillTrack` и нажмите **"Import"**.

## 3. Настройка базы данных (Vercel Postgres)

1.  В процессе настройки проекта (на экране "Configure Project"), в левом меню (или в отдельной вкладке после создания) найдите раздел **Storage**.
2.  Нажмите **"Create Database"** -> выберите **"Postgres"**.
3.  Примите условия, дайте название (например, `skilltrack-db`) и выберите регион (лучше `Frankfurt` или любой в Европе для скорости).
4.  После создания базы данных, Vercel предложит **"Connect Project"**. Выберите ваш проект.
5.  Vercel автоматически добавит переменные окружения (`POSTGRES_URL`, `POSTGRES_PRISMA_URL` и т.д.) в настройки вашего проекта.

## 4. Настройка переменных окружения (Environment Variables)

На экране настройки проекта (Configure Project) разверните секцию **"Environment Variables"**. Вам нужно добавить те переменные, которые были у вас в `.env` файле, **КРОМЕ** `DATABASE_URL` (ее Vercel добавил сам на шаге 3).

Добавьте:
*   `NEXTAUTH_SECRET`: Сгенерируйте новый случайный ключ (можно набрать случайные символы или использовать онлайн генератор).
*   `NEXTAUTH_URL`: Укажите URL вашего будущего сайта (например, `https://skilltrack.vercel.app`). *Важно: при первом деплое Vercel еще не дал домен, поэтому можно временно написать `http://localhost:3000`, а после деплоя поменять на реальный домен в настройках проекта.*

## 5. Деплой

1.  Нажмите **"Deploy"**.
2.  Vercel начнет сборку проекта.
3.  **Важно:** Первый деплой может упасть на этапе миграции базы данных, так как мы еще не применили схему.

## 6. Применение схемы базы данных (Prisma Migrate)

После того как проект создан (даже если деплой упал), нам нужно "создать таблицы" в облачной базе данных.

1.  Зайдите в настройки проекта на Vercel -> **Settings** -> **Build & Development Settings**.
2.  В поле **Build Command** измените команду на:
    ```bash
    npx prisma generate && npx prisma migrate deploy && next build
    ```
    *Это заставит Vercel применять миграции базы данных при каждом обновлении сайта.*

3.  Перейдите во вкладку **Deployments**, нажмите на три точки у последнего деплоя и выберите **"Redeploy"**.

Теперь Vercel применит схему к базе данных Postgres, соберет проект и запустит его!

## 7. Локальная разработка (Важно!)

Так как мы сменили `sqlite` на `postgresql` в `schema.prisma`, локально `npm run dev` может перестать работать, если у вас не установлен Postgres.

Чтобы продолжить разработку локально, у вас есть два пути:
1.  **Вернуть SQLite:** Просто поменяйте в `schema.prisma` `provider = "postgresql"` обратно на `provider = "sqlite"` пока разрабатываете. Перед пушем на GitHub меняйте обратно.
2.  **Подключиться к облачной базе:** Вы можете скопировать `POSTGRES_URL` из настроек Vercel в свой локальный `.env` файл (вместо старого `DATABASE_URL`) и работать с реальной облачной базой.
